const path=require("path"),fileService=require("../services/fileServices"),timestamp=Date.now(),date=new Date(timestamp),day=date.getDate(),month=date.getMonth()+1,year=date.getFullYear();module.exports={uploadFile:async(e,r)=>{try{if(!e.file)return r.status(400).json({error:"Nenhum arquivo enviado."});const a=e.file.originalname,o=path.extname(a),t=`Reuniao-${day}-${month}-${year}${o}`;e.file.filename=t,fileService.uploadFile(e.file,((e,a)=>e?r.status(500).json({error:"Erro ao fazer o upload do arquivo.",details:e.message}):r.status(200).json({message:"Arquivo enviado com sucesso.",url:a})))}catch(e){return console.error("Erro no controller:",e),r.status(500).json({error:"Erro inesperado.",details:e.message})}}};